<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Juniorgram: DataAccess::PostgreAdapter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="juniorgram_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Juniorgram<span id="projectnumber">&#160;0.6</span>
   </div>
   <div id="projectbrief">C++ written messenger! Never before and never again!</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>DataAccess</b></li><li class="navelem"><a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_data_access_1_1_postgre_adapter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">DataAccess::PostgreAdapter Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Adapter class for working with PostgreSQL. This is a thread safe singleton.  
 <a href="class_data_access_1_1_postgre_adapter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_postgre_adapter_8hpp_source.html">PostgreAdapter.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DataAccess::PostgreAdapter:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_data_access_1_1_postgre_adapter.png" usemap="#DataAccess::PostgreAdapter_map" alt=""/>
  <map id="DataAccess::PostgreAdapter_map" name="DataAccess::PostgreAdapter_map">
<area href="class_data_access_1_1_i_adapter.html" title="An abstract class manages the connection to database." alt="DataAccess::IAdapter" shape="rect" coords="0,0,174,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a10e6b636660ba981bd0c9e284ca52eb0"><td class="memItemLeft" align="right" valign="top"><a id="a10e6b636660ba981bd0c9e284ca52eb0" name="a10e6b636660ba981bd0c9e284ca52eb0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>PostgreAdapter</b> (const <a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &amp;other)=delete</td></tr>
<tr class="separator:a10e6b636660ba981bd0c9e284ca52eb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88dda8ae55f0401fde8e9eb9f8697ed7"><td class="memItemLeft" align="right" valign="top"><a id="a88dda8ae55f0401fde8e9eb9f8697ed7" name="a88dda8ae55f0401fde8e9eb9f8697ed7"></a>
<a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &amp;other)=delete</td></tr>
<tr class="separator:a88dda8ae55f0401fde8e9eb9f8697ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e9a56a6dd685562cedb9e45fb321409"><td class="memItemLeft" align="right" valign="top"><a id="a5e9a56a6dd685562cedb9e45fb321409" name="a5e9a56a6dd685562cedb9e45fb321409"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>PostgreAdapter</b> (<a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &amp;&amp;other)=delete</td></tr>
<tr class="separator:a5e9a56a6dd685562cedb9e45fb321409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cae00042acdb34339a94a44252cc481"><td class="memItemLeft" align="right" valign="top"><a id="a1cae00042acdb34339a94a44252cc481" name="a1cae00042acdb34339a94a44252cc481"></a>
<a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &amp;&amp;other)=delete</td></tr>
<tr class="separator:a1cae00042acdb34339a94a44252cc481"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb64a4195008520a7771e7e1ad92eb5e"><td class="memItemLeft" align="right" valign="top">std::optional&lt; std::any &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_postgre_adapter.html#acb64a4195008520a7771e7e1ad92eb5e">query</a> (const std::string_view &amp;query) override</td></tr>
<tr class="memdesc:acb64a4195008520a7771e7e1ad92eb5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for executing SQL queries.  <br /></td></tr>
<tr class="separator:acb64a4195008520a7771e7e1ad92eb5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af600f7e5a24070cf4dea33785fa0e666"><td class="memItemLeft" align="right" valign="top">pqxx::connection &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_postgre_adapter.html#af600f7e5a24070cf4dea33785fa0e666">getConnection</a> (void)</td></tr>
<tr class="memdesc:af600f7e5a24070cf4dea33785fa0e666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for getting connection object from pqxx.  <br /></td></tr>
<tr class="separator:af600f7e5a24070cf4dea33785fa0e666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b484c3491b7e54dc6d9ef143cc0cf1d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_postgre_adapter.html#a2b484c3491b7e54dc6d9ef143cc0cf1d">isConnected</a> (void) const override</td></tr>
<tr class="separator:a2b484c3491b7e54dc6d9ef143cc0cf1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a153059ebb2f3f413a5196183adc73a2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_postgre_adapter.html#a153059ebb2f3f413a5196183adc73a2f">closeConnection</a> (void) override</td></tr>
<tr class="memdesc:a153059ebb2f3f413a5196183adc73a2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for closing connection.  <br /></td></tr>
<tr class="separator:a153059ebb2f3f413a5196183adc73a2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa49a912c05ddd502d1a1a05156b3f63d"><td class="memItemLeft" align="right" valign="top">virtual std::optional&lt; std::any &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_i_adapter.html#aa49a912c05ddd502d1a1a05156b3f63d">query</a> (const std::string_view &amp;query)=0</td></tr>
<tr class="memdesc:aa49a912c05ddd502d1a1a05156b3f63d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for executing SQL queries.  <br /></td></tr>
<tr class="separator:aa49a912c05ddd502d1a1a05156b3f63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12530850dcd116116accd6168b199376"><td class="memItemLeft" align="right" valign="top"><a id="a12530850dcd116116accd6168b199376" name="a12530850dcd116116accd6168b199376"></a>
virtual bool&#160;</td><td class="memItemRight" valign="bottom"><b>isConnected</b> (void) const =0</td></tr>
<tr class="separator:a12530850dcd116116accd6168b199376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9025dabaecb816d9ee546c91756aba59"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_i_adapter.html#a9025dabaecb816d9ee546c91756aba59">closeConnection</a> (void)=0</td></tr>
<tr class="separator:a9025dabaecb816d9ee546c91756aba59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a698eb7df48d7cdfb3f6e4b97cf3f2ffd"><td class="memItemLeft" align="right" valign="top">static std::shared_ptr&lt; <a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_postgre_adapter.html#a698eb7df48d7cdfb3f6e4b97cf3f2ffd">Instance</a> (const std::string_view &amp;options={})</td></tr>
<tr class="memdesc:a698eb7df48d7cdfb3f6e4b97cf3f2ffd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method that creates new instance of Adapter. It needs for technical purposes. Don't use it (it's because I designed the interface badly). Instead use getInstance method.  <br /></td></tr>
<tr class="separator:a698eb7df48d7cdfb3f6e4b97cf3f2ffd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_methods_class_data_access_1_1_i_adapter"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_class_data_access_1_1_i_adapter')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="class_data_access_1_1_i_adapter.html">DataAccess::IAdapter</a></td></tr>
<tr class="memitem:aad3b189624e653c7917361c978b98d90 inherit pub_static_methods_class_data_access_1_1_i_adapter"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:aad3b189624e653c7917361c978b98d90 inherit pub_static_methods_class_data_access_1_1_i_adapter"><td class="memTemplItemLeft" align="right" valign="top">static std::shared_ptr&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_data_access_1_1_i_adapter.html#aad3b189624e653c7917361c978b98d90">getInstance</a> (const std::string_view &amp;options={})</td></tr>
<tr class="memdesc:aad3b189624e653c7917361c978b98d90 inherit pub_static_methods_class_data_access_1_1_i_adapter"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method for getting Adapter instances.  <br /></td></tr>
<tr class="separator:aad3b189624e653c7917361c978b98d90 inherit pub_static_methods_class_data_access_1_1_i_adapter"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a8a647c481bf77de387be200a8155715c"><td class="memItemLeft" align="right" valign="top"><a id="a8a647c481bf77de387be200a8155715c" name="a8a647c481bf77de387be200a8155715c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>PostgreAdapter</b> (const std::string_view &amp;options)</td></tr>
<tr class="separator:a8a647c481bf77de387be200a8155715c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Adapter class for working with PostgreSQL. This is a thread safe singleton. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a153059ebb2f3f413a5196183adc73a2f" name="a153059ebb2f3f413a5196183adc73a2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a153059ebb2f3f413a5196183adc73a2f">&#9670;&#160;</a></span>closeConnection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DataAccess::PostgreAdapter::closeConnection </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method for closing connection. </p>
<p>Method for change connection to the database. </p><dl class="section warning"><dt>Warning</dt><dd>Be careful to use it because if you have many instances of this class and after call this method, you may have 'dangling' pointers. </dd></dl>

<p>Implements <a class="el" href="class_data_access_1_1_i_adapter.html">DataAccess::IAdapter</a>.</p>

</div>
</div>
<a id="af600f7e5a24070cf4dea33785fa0e666" name="af600f7e5a24070cf4dea33785fa0e666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af600f7e5a24070cf4dea33785fa0e666">&#9670;&#160;</a></span>getConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pqxx::connection &amp; DataAccess::PostgreAdapter::getConnection </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method for getting connection object from pqxx. </p>
<p>This object using for low level accessing the database. You probably won't need it. </p><dl class="section return"><dt>Returns</dt><dd>pqxx::Connection object. </dd></dl>

</div>
</div>
<a id="a698eb7df48d7cdfb3f6e4b97cf3f2ffd" name="a698eb7df48d7cdfb3f6e4b97cf3f2ffd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698eb7df48d7cdfb3f6e4b97cf3f2ffd">&#9670;&#160;</a></span>Instance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::shared_ptr&lt; <a class="el" href="class_data_access_1_1_postgre_adapter.html">PostgreAdapter</a> &gt; DataAccess::PostgreAdapter::Instance </td>
          <td>(</td>
          <td class="paramtype">const std::string_view &amp;&#160;</td>
          <td class="paramname"><em>options</em> = <code>{}</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method that creates new instance of Adapter. It needs for technical purposes. Don't use it (it's because I designed the interface badly). Instead use getInstance method. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>- Connection options. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to current instance of Postgre adapter. </dd></dl>

</div>
</div>
<a id="a2b484c3491b7e54dc6d9ef143cc0cf1d" name="a2b484c3491b7e54dc6d9ef143cc0cf1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b484c3491b7e54dc6d9ef143cc0cf1d">&#9670;&#160;</a></span>isConnected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool DataAccess::PostgreAdapter::isConnected </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="class_data_access_1_1_i_adapter.html">DataAccess::IAdapter</a>.</p>

</div>
</div>
<a id="acb64a4195008520a7771e7e1ad92eb5e" name="acb64a4195008520a7771e7e1ad92eb5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb64a4195008520a7771e7e1ad92eb5e">&#9670;&#160;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; std::any &gt; DataAccess::PostgreAdapter::query </td>
          <td>(</td>
          <td class="paramtype">const std::string_view &amp;&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method for executing SQL queries. </p>
<p>You shouldn't use this method because it's low level accessing the database. Use it if you want something specific from database, instead use PostgreQuery. If you want to insert some strings, big text or a timestamp you must wrap the string/text by single quotes. You don't have to put ';' at the end of query. </p><div class="fragment"><div class="line">...-&gt;<a class="code hl_function" href="class_data_access_1_1_postgre_adapter.html#acb64a4195008520a7771e7e1ad92eb5e">query</a>(<span class="stringliteral">&quot;SELECT * FROM table_name WHERE name = &#39;username&#39;&quot;</span>);</div>
<div class="ttc" id="aclass_data_access_1_1_postgre_adapter_html_acb64a4195008520a7771e7e1ad92eb5e"><div class="ttname"><a href="class_data_access_1_1_postgre_adapter.html#acb64a4195008520a7771e7e1ad92eb5e">DataAccess::PostgreAdapter::query</a></div><div class="ttdeci">std::optional&lt; std::any &gt; query(const std::string_view &amp;query) override</div><div class="ttdoc">Method for executing SQL queries.</div></div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SQL</td><td>query in the form of string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Optional result. </dd></dl>

<p>Implements <a class="el" href="class_data_access_1_1_i_adapter.html#aa49a912c05ddd502d1a1a05156b3f63d">DataAccess::IAdapter</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>DataAccess/DataAccess.Postgre/<a class="el" href="_postgre_adapter_8hpp_source.html">PostgreAdapter.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
